# Note for designing data intensive application

## Fundations of Data System 

### Ch02: Data model 

Relational Versus Document Databases
  
Take SCTE as example:

- They store the test data using Azure table which is document based model.
- It is advantage for its flexibility: easy add attributes.
- Its disadvantage is can not tracking the responsibilities of the data (generated by whose workload )
  - Document based model lack the power of many to many relationship support.
- So, if SCTE becomes to track many-to-many relationshipts, then maybe relational model is more useful.
- In current situation, the document based model is better choice for SCTE.


### Ch03: Storage and Retrieval

- Index, usually is built with B-tree.

### Ch04: Encoding and Evolution

- Encode and decode, protocol design and example 
- Data flow: 
  - RPC vs message passing: message passing is usually one-way, async.
  - Message broker: RabbitMQ, Apache Kafka


## Distributed Data 

### Ch05: Replication 

- 3 ways for replicating changes between nodes: single-leader, multi-leader, and leaderless replication.
- single-leader
  - leader failure: failover process 
    - Determining that the leader has failed. 
    - Choosing a new leader. 
    - Reconfiguring the system to use the new leader.
  - how to implement read-after-write in a system with leader-based-replication?

- multi-leader replication 
  - The biggest problem with multi-leader replication is that write conflicts can occur, which means that conflict resolution is required.
  - Avoiding conflicts is a frequently recommended approch, like: 
  - if the application can ensure that all writes for a particular record go through the same leader
  - Various ways of achieving convergent conflict.
- An algorithm that determines whether two operations are concurrent, or whether one happended before another.


### Ch06: Partition (sharding)

- The main reason for wanting to partition data is scalability.


### Ch07: Transactions

- Identify where/whether you need transaction.
  - Atomicity, all-or-nothing guarentee.
  - Consistency, refer to an application-specific notion of the database being in a "good state".
  - Isolation, concurrently running transactions shouldn't interfere with each other.
  - Durability,  is the promise that once a transaction has committed successfully, any data it has written will not be lost.

### Ch08: Distributed System Trouble

- Unreliable Networks 
  - Timeouts and unbounded delays (use UDP in Voice over IP)
- Unreliable Clocks 

### Ch09: Consistency and Consensus 

- Linearizability, 
  - Also known as atomic consistency, strong consistency, immediate consistency)
  - The basic idea is to make a system appear as if there were only one copy of the data, and all operations on it are atomic.
  - With this garantee, even though there may be multiple replicas, the application does not need to worry about them.
  - Example shown with `cas` compare-and-set operation.
  - The cost of linearizability 
- Ordering Guarantees 
- Total Order Broadcast: requires two safety perporties -- 1)reliable delivery and 2) totoaly ordered delivery 
- Distributed Transactions and Consensus


### Ch10: Batch Processing 

### Ch11: Stream Processing 
